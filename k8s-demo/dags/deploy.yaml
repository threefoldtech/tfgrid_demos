env:
  - MNEMONIC: ${MNEMONIC}
  - MNEMONICS: ${MNEMONICS}
  - NETWORK: ${NETWORK}

steps:
   # ensure terraform installation
  - name: ensure installation
    description: ensure terraform installation
    command: terraform version

  # initializing terraform provider plugins
  - name: terraform init
    command: terraform init
    description: initializing terraform provider plugins
    dir: deployment
    depends:
      - ensure installation

  # deploy k8s cluster using terraform
  - name: terraform apply
    command: terraform apply -auto-approve
    description: deploy k8s cluster using terraform
    dir: deployment
    depends:
      - terraform init
